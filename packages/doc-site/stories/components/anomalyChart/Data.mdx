import { Canvas, Meta, Story } from '@storybook/blocks';
import * as AnomalyChartStories from './AnomalyChart.stories';

<Meta of={AnomalyChartStories} />

# Anomaly Chart Data Structure

[Learn more about the Anomaly Chart](/docs/components-anomalychart-docs--docs).

The Anomaly provides a timeline view of anomaly predictions, visualizing the raw data in a specific format.

The data structure for the Anomaly chart is an array with a single object, which contains the following properties:

---

**state (string)** : Represents the state of the data, which can be one of the following values:

  * 'loading': Indicates that the data is currently being loaded.
  * 'success': Indicates that the data was loaded successfully.
  * 'failed': Indicates that the data loading failed.
  * 'error': Indicates an error occurred during data loading.

---

**value (object)** : An object containing the raw data and optional style overrides. It has the following properties:

  - **data (array)**: An array of objects, where each object represents a single Diagnostic event with a timestamp and Diagnostic object.

      - **timestamp (number)**: The time of the diagnostic point, in milliseconds.

      - **diagnostics (array)**: An array of objects representing individual data points, where each object has the following properties:
        
        - **name (string)**: The name of the diagnostic point.

        - **value (number)**: The value of the diagnostic point, which should be a number between 0 and 1.

  - **styles (optional, object)**: An object that overrides global style settings. It can have the following properties:

    - **decimalPlaces (optional, number)**: Defines the number of decimal places to display for the diagnostic values.

    - **color (optional, array)**: An array representing the color palette used to render the diagnostics.


### Example 

Here's an example of the Anomaly chart data structure:

```
{
  state: 'success',
  value: {
    styles: {
      // defines the color pallette for the diagnostics
      color: ['pink', 'blue', 'green', 'red'],
    },
    data: [
      {
        timestamp: 1711078622000,
        diagnostics: [
          {
            name: 'Diagnostic Name 1',
            value: 0.25,
          },
          {
            name: 'Diagnostic Name 2',
            value: 0.25,
          },
          {
            name: 'Diagnostic Name 3',
            value: 0.5,
          },
        ],
      },
      {
        timestamp: 1711165022000,
        diagnostics: [
          {
            name: 'Diagnostic Name 1',
            value: 0.25,
          },
          {
            name: 'Diagnostic Name 2',
            value: 0.25,
          },
          {
            name: 'Diagnostic Name 3',
            value: 0.5,
          },
        ],
      },
    ],
  },
};
```

In this example, the state is 'success', indicating that the data was loaded successfully. The value object contains two diagnostic events, each with a timestamp and an array of diagnostic objects. Each diagnostic object has a name and a value between 0 and 1. The styles object overrides the global color palette for rendering the diagnostics, specifying an array of colors (['pink', 'blue', 'green', 'red']).